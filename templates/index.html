<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Lesson Evaluator</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        textarea { width: 100%; height: 150px; }
        .feedback { border: 1px solid #ccc; padding: 15px; margin-top: 20px; }
        .error { color: red; }
    </style>
</head>
<body>
    <h1>Lesson Evaluator</h1>
    {% if error %}
        <p class="error">{{ error }}</p>
    {% endif %}

    <form method="post" action="/evaluate">
        <label>Topic:</label><br>
        <input type="text" name="topic" value="{{ request.form.topic or '' }}"><br><br>
        
        <label>Explanation:</label><br>
        <textarea name="explanation">{{ request.form.explanation or '' }}</textarea><br><br>
        
        <button type="submit">Evaluate Lesson</button>
    </form>

    {% if feedback %}
    <div class="feedback">
        <h2>Lesson Evaluation</h2>
        <p><strong>Topic:</strong> {{ feedback.topic }}</p>
        <p><strong>Numerical Grade:</strong> {{ feedback.numerical_grade }}/100</p>
        <p><strong>Letter Grade:</strong> {{ feedback.letter_grade }}</p>
        <p><strong>Calculation:</strong> {{ feedback.calculation }}</p>

        <h3>Component Scores</h3>
        <ul>
            <li>Content: {{ feedback.score_content }}</li>
            <li>Organization: {{ feedback.score_organization }}</li>
            <li>Mechanics: {{ feedback.score_mechanics }}</li>
        </ul>

        <h3>Strengths</h3>
        <ul>{% for s in feedback.strengths %}<li>{{ s }}</li>{% endfor %}</ul>

        <h3>Weaknesses</h3>
        <ul>{% for w in feedback.weaknesses %}<li>{{ w }}</li>{% endfor %}</ul>

        <h3>Improvement Suggestions</h3>
        <ul>{% for i in feedback.improvement_suggestions %}<li>{{ i }}</li>{% endfor %}</ul>

        <h3>Mechanics Issues</h3>
        {% if feedback.mechanics_issues %}
            <ul>{% for m in feedback.mechanics_issues %}<li>{{ m }}</li>{% endfor %}</ul>
        {% else %}
            <p>None noted</p>
        {% endif %}
    </div>
    {% endif %}
</body>
</html>
